# MySQL主从读写分离
将一个数据库的数据拷贝为多份，原始的数据库称为主库，主要负责数据的写入，拷贝的数据库称为从库，主要负责数据的查询。

## 主从复制
Mysql主从复制流程：主库会创建一个log dump线程来发送binlog给从库。从库在连接到主库时会创建一个IO线程，用来请求主库更新的binlog，并且把接收到的binlog信息写入一个叫做relay log的日志文件中。同时，从库还会创建一个sql线程读取relay log，并且在从库中回放，实现主从复制。

![image](https://static001.geekbang.org/resource/image/57/4d/575ef1a6dc6463e4c5a60a3752d8554d.jpg)

是不是可以无限增加从库呢？不是的，一般一个主库最多挂3～5个从库。

## 主从延迟
主从延迟带来的典型问题就是读从库查询不到信息，对于这种问题，可以通过消息、缓存等方式来处理，尽量不要读主库。

主从延迟时间应当作为重点监控指标，一般主从延迟是毫秒级的。