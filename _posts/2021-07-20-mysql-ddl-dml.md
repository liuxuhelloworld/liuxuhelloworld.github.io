# DDL
```sql
alter table XXX engine=InnoDB;
```
这个语句用来重建表。

为什么需要重建表呢？因为经过大量增删改的表，数据页可能存在很多hole，重建表可以去掉这些hole，从而达到收缩表空间的目的。

重建表的过程中会先获取MDL写锁，但是这个写锁在真正拷贝数据之前就退化成读锁了，读锁不会阻塞增删改操作，这样重建表就可以看作是Online的。为什么不直接释放锁呢？为了防止其他线程对这个表同时做DDL.

重建表需要扫描原表数据和构建临时文件，对于很大的表来说，这个操作是很消耗IO和CPU的，所以操作要谨慎。

# DML

